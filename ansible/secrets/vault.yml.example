---
# ========================================
# EXEMPLE DE VAULT - NE JAMAIS COMMITER EN CLAIR
# ========================================
#
# UTILISATION:
# 1. Copier ce fichier: cp vault.yml.example vault.yml
# 2. Générer des secrets forts avec:
#    ansible-vault create vault.yml
# 3. Utiliser des gestionnaires externes en production:
#    - HashiCorp Vault
#    - AWS Secrets Manager
#    - Azure Key Vault
#
# ========================================

# ========================================
# Traefik
# ========================================
# Générer avec: echo $(htpasswd -nbB admin "$(openssl rand -base64 32)") | sed -e s/\\$/\\$\\$/g
traefik_auth: "REMPLACER_PAR_HTPASSWD_HASH"
traefik_acme_email: "security@votre-domaine.fr"

# ========================================
# PostgreSQL mutualisé
# ========================================
# Générer avec: openssl rand -base64 32
postgres_root_password: "{{ lookup('env', 'POSTGRES_ROOT_PASSWORD') | default('GENERER_AVEC_OPENSSL', true) }}"
postgres_replication_password: "{{ lookup('env', 'POSTGRES_REPL_PASSWORD') | default('GENERER_AVEC_OPENSSL', true) }}"

# Databases & Users
postgres_databases:
  nextcloud:
    user: "nextcloud"
    password: "{{ lookup('env', 'NEXTCLOUD_DB_PASSWORD') | default('GENERER_AVEC_OPENSSL', true) }}"
  immich:
    user: "immich"
    password: "{{ lookup('env', 'IMMICH_DB_PASSWORD') | default('GENERER_AVEC_OPENSSL', true) }}"
  grafana:
    user: "grafana"
    password: "{{ lookup('env', 'GRAFANA_DB_PASSWORD') | default('GENERER_AVEC_OPENSSL', true) }}"

# ========================================
# Redis mutualisé
# ========================================
redis_password: "{{ lookup('env', 'REDIS_PASSWORD') | default('GENERER_AVEC_OPENSSL', true) }}"

# ========================================
# Applications
# ========================================
nextcloud_admin_user: "admin"
nextcloud_admin_password: "{{ lookup('env', 'NEXTCLOUD_ADMIN_PASSWORD') | default('GENERER_AVEC_OPENSSL', true) }}"
nextcloud_db_password: "{{ lookup('env', NEXTCLOUD_DB_PASSWORD') | default('GENERER_AVEC_OPENSSL', true) }}"
nextcloud_db_user: "{{ lookup('env', 'NEXTCLOUD_DB_USER') | default('nextcloud', true) }}"
nextcloud_db_database: "nextcloud"

grafana_admin_user: "admin"
grafana_admin_password: "{{ lookup('env', 'GRAFANA_ADMIN_PASSWORD') | default('GENERER_AVEC_OPENSSL', true) }}"
grafana_secret_key: "{{ lookup('env', 'GRAFANA_SECRET_KEY') | default(lookup('password', '/dev/null length=32 chars=ascii_letters,digits'), true) }}"

# ========================================
# AMP (CubeCoders)
# ========================================
amp_license_key: "{{ lookup('env', 'AMP_LICENSE_KEY') }}"
amp_admin_password: "{{ lookup('env', 'AMP_ADMIN_PASSWORD') | default('GENERER_AVEC_OPENSSL', true) }}"

# ========================================
# Notifications (optionnel)
# ========================================
discord_webhook_url: "{{ lookup('env', 'DISCORD_WEBHOOK_URL') }}"

# ========================================
# ROTATION DES SECRETS (IMPORTANT)
# ========================================
# Mettre en place une politique de rotation tous les 90 jours
# Utiliser Ansible Tower/AWX pour automatiser
# Documenter la procédure dans docs/secrets-rotation.md